<html>
<header class="col-lg-12">
    <h1 class="h1-strong" *ngIf="user && user.dogname">
        {{ title }} {{ user.dogname.toUpperCase() }}
    </h1>
</header>

<body>
    
<!--DATA PROFILE-->
<div class="col-lg-12" id="data-profile" *ngIf="user">

    <div class="col-lg-6 avatar">
        <img src="{{ url + 'get-image-user/' + user.image }}" *ngIf="user.image" />
        <img src="assets/images/user-perro.png" *ngIf="!user.image" />

        <button type="button" class="btn btn-secondary btn-sm" *ngIf="following && user._id != identity._id">
            Lo sigues
        </button>

        <!--CARD-BODY-->
        <div class="card-body">
            <button type="button" class="btn btn-outline-success">
                <i class="fas fa-redo-alt"></i>
                <span> {{ stats.following }}</span>
            </button>

            <button type="button" class="btn btn-outline-danger">
                <i class="fas fa-undo-alt"></i>
                <span> {{ stats.followed }}</span>
            </button>

            <button type="button" class="btn btn-outline-primary">
                <i class="far fa-edit"></i>
                <span> {{ stats.publication }}</span>
            </button>
        </div>
    </div>


    <!--SEGUIMIENTO-->
    <div class="seguimiento" *ngIf="user._id != identity._id">

        <button class="btn btn-success" *ngIf="!following" (click)="followUser(user._id)">
            Seguir
        </button>

        <button class="btn btn-danger" *ngIf="following" (click)="unFollowUser(user._id)">
            No seguir
        </button>

    </div>

</div>

<!--Formulario de publicación-->
<div id="new-publication" class="card" class="col-lg-10 pull-left panel panel-default"
    *ngIf="user.dogname == identity.dogname">

    <div class="alert alert-success" *ngIf="status == 'success'">
        Publicación enviada correctamente
    </div>
    <div class="alert alert-danger" *ngIf="status == 'error'">
        Publicación no enviada
    </div>

    <form #newPubForm="ngForm" (ngSubmit)="onSubmit(newPubForm, $event);" class="col-lg-10">
        <p>
            <label>¿Que estas pensando hoy?</label>
            <textarea name="text" #text="ngModel" [(ngModel)]="publication.text" class="form-control"
                required></textarea>
            <span *ngIf="!text.valid && text.touched">
                El texto de la publicación es obligatorio
            </span>
        </p>

        <p>
            <label>Sube una imagen</label>
            <input type="file" placeholder="Subir imagen" (change)="fileChangeEvent($event)" />
        </p>

        <input type="submit" value="Enviar" class="btn btn-success" [disabled]="!newPubForm.form.valid" />
    </form>
</div>

</body>
</html>